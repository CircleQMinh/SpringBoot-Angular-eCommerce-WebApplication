<div>
    <div class="sidebar">
        <div class="sidebar-inner">
            <div class="sidebar-logo">
                <div class="peers ai-c fxw-nw">
                    <div class="peer peer-greed"><a class="sidebar-link td-n">
                            <div class="peers ai-c fxw-nw">
                                <div class="peer">
                                    <div class="logo"><img
                                            src="https://colorlib.com/polygon/adminator/assets/static/images/logo.png"
                                            alt=""></div>
                                </div>
                                <div class="peer peer-greed">
                                    <h5 class="lh-1 mB-0 logo-text">Administrator</h5>
                                </div>
                            </div>
                        </a></div>
                    <div class="peer">
                        <div class="mobile-toggle sidebar-toggle"><a class="td-n"><i
                                    class="ti-arrow-circle-left"></i></a></div>
                    </div>
                </div>
            </div>
            <ul class="sidebar-menu scrollable pos-r ps">
                <li class="nav-item "><a class="sidebar-link" routerLink="/Administrator"><span class="icon-holder"><i
                                class="fas fa-home"></i></span><span class="title">Dashboard</span></a></li>
                <li class="nav-item"><a class="sidebar-link" routerLink="/Administrator-Product"><span
                            class="icon-holder"><i class="fas fa-box-open"></i></span><span
                            class="title">Product</span></a></li>
                <li class="nav-item"><a class="sidebar-link" routerLink="/Administrator-Order"><span
                            class="icon-holder"><i class="fas fa-clipboard-check"></i> </span><span
                            class="title">Order</span></a></li>
                <li class="nav-item"><a class="sidebar-link" routerLink="/Administrator-User"><span
                            class="icon-holder"><i class="fas fa-user"></i> </span><span class="title">User</span></a>
                </li>
                <li class="nav-item"><a class="sidebar-link" routerLink="/Administrator-Statistical"><span
                            class="icon-holder"><i class="fas fa-chart-line"></i> </span><span
                            class="title">Statistical</span></a>
                </li>
                <li class="nav-item"><a class="sidebar-link"><span class="icon-holder"><i
                                class="fas fa-sign-out-alt"></i> </span><span class="title">Logout</span></a></li>


                <div class="ps__rail-x" style="left: 0px; bottom: 0px;">
                    <div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div>
                </div>
                <div class="ps__rail-y" style="top: 0px; right: 0px;">
                    <div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 0px;"></div>
                </div>
            </ul>
        </div>
    </div>
    <div class="page-container">
        <div class="header navbar">
            <div class="header-container">
                <ul class="nav-left">
                    <li><a><i></i> User</a></li>
                </ul>
                <ul class="nav-right">
                    <li class="notifications dropdown"><span class="counter bgc-red">3</span> <a
                            class="dropdown-toggle no-after" id="dropdownMenuButton1" data-bs-toggle="dropdown"
                            aria-expanded="false"><i class="ti-bell"></i></a>
                    </li>
                    <li class="notifications dropdown"><span class="counter bgc-blue">3</span> <a
                            class="dropdown-toggle no-after" data-bs-toggle="dropdown"><i class="ti-email"></i></a>

                    </li>
                    <li class="dropdown"><a class="dropdown-toggle no-after peers fxw-nw ai-c lh-1"
                            data-bs-toggle="dropdown">
                            <div class="peer mR-10"><img class="w-2r bdrs-50p"
                                    src="https://image.flaticon.com/icons/png/128/1144/1144760.png" alt=""></div>
                            <div class="peer"><span class="fsz-sm c-grey-900">{{user.name}}</span></div>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <main class="main-content bgc-grey-100">
            <div id="mainContent">
                <div class="row gap-20 masonry pos-r" style="position: relative; height: 1806px;">
                    <div class="masonry-sizer col-md-6"></div>
                    <div class="masonry-item w-100" style="position: absolute; left: 0%; top: 0px;">
                        <div class="row gap-20">
                            <div class="col-md-3">
                                <div class="layers bd bgc-white p-20">
                                    <!--  -->
                                    <div class="layer w-100 mB-10">
                                        <h3 class="lh-1" style="margin-bottom: 3%;">List of Users</h3>
                                        <img style="width: 40px;height: 40px;"
                                            src="https://image.flaticon.com/icons/png/128/1149/1149576.png"
                                            ngbTooltip="Add a User" (click)="openAddModal(add_user)">Add a user
                                        <div style="
                                        display: inline-block;
                                        width: 25%; margin-left: 8%;">
                                            <div>Role : <select class="select select-history select-lg"
                                                    [(ngModel)]="role" (change)="getNewPage()">
                                                    <option value="all" selected="true">All</option>
                                                    <option value="admin">Admin</option>
                                                    <option value="employee">Employee</option>
                                                    <option value="shipper">Shipper</option>
                                                    <option value="customer">Customer</option>
                                                </select></div>
                                        </div>
                                        <div style="
                                        display: inline-block;
                                        width: 25%;">
                                            <div>Order by: <select class="select select-history select-lg"
                                                    [(ngModel)]="orderby" (change)="getNewPage()">
                                                    <option value="username">Username</option>
                                                    <option value="id" selected="">Id</option>
                                                    <option value="name">Name</option>
                                                    <option value="status">Status</option>
                                                </select></div>
                                        </div>
                                        <div style="
                                        display: inline-block;
                                        width: 25%;">
                                            <div>Page size : <select class="select select-history select-lg"
                                                    [(ngModel)]="pageSize" (change)="getNewPage()">
                                                    <option value="5" selected>5</option>
                                                    <option value="10">10</option>
                                                    <option value="15">15</option>
                                                    <option value="25">25</option>

                                                </select></div>
                                        </div>
                                        <div class="table-responsive p-20">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th class="bdwT-0">Name</th>
                                                        <th class="bdwT-0">Role</th>
                                                        <th class="bdwT-0">Username</th>
                                                        <th class="bdwT-0" style="
                                                        width: 115px;
                                                    ">Email</th>
                                                        <th class="bdwT-0">Phone</th>
                                                        <th class="bdwT-0" style="
                                                        width: 115px;
                                                    ">Status</th>
                                                        <th class="bdwT-0" colspan="2">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody *ngFor="let u of usersList">
                                                    <tr>
                                                        <td class="fw-600">{{u.name}}</td>
                                                        <td><span>{{u.role}}</span>
                                                        </td>
                                                        <td>{{u.username}}</td>
                                                        <td><span class="text-success">{{u.email}}</span></td>
                                                        <td class="fw-600">{{u.phone}}</td>
                                                        <td *ngIf="u.status==0"><span
                                                                class="badge bgc-red-50 c-red-700 p-10 lh-0 tt-c rounded-pill">Unactive</span>
                                                        </td>
                                                        <td *ngIf="u.status==1"><span
                                                                class="badge bgc-green-50 c-green-700 p-10 lh-0 tt-c rounded-pill">Active</span>
                                                        </td>
                                                        <td><span class="text-success"><img
                                                                    style="width: 40px;height: 40px;"
                                                                    src="https://image.flaticon.com/icons/png/128/2910/2910768.png"
                                                                    ngbTooltip="Edit"
                                                                    (click)="openEditModal(edit_user,u)"></span>
                                                        </td>
                                                        <td *ngIf="u.username!=user.username"><span class="text-success"><img
                                                                    style="width: 40px;height: 40px;"
                                                                    src="https://image.flaticon.com/icons/png/128/1632/1632602.png"
                                                                    ngbTooltip="Delete" (click)="openDeleteModal(user_delete,u)"></span></td>
                                                        <td *ngIf="u.username==user.username"></td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div class="row justify-content-center">
                                            <div class="col-4" style="margin-left: 69%;">
                                                <ngb-pagination [(page)]="pageNumber" [pageSize]="pageSize"
                                                    [collectionSize]="collectionSize" [maxSize]="5" [boundaryLinks]=true
                                                    (pageChange)="getPage()">
                                                </ngb-pagination>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <div class="layer w-100">
                                        <div class="peers ai-sb fxw-nw">
                                            <div class="peer peer-greed"><span id="sparklinedash"><canvas width="45"
                                                        height="20"
                                                        style="display: inline-block; width: 45px; height: 20px; vertical-align: top;"></canvas></span>
                                            </div>
                                            <div class="peer"><span
                                                    class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-green-50 c-green-500">+10%</span>
                                            </div>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <!-- <footer class="bdT ta-c p-30 lh-0 fsz-sm c-grey-600"><span>Copyright © 2021 Designed by <a
                    href="https://colorlib.com" target="_blank" title="Colorlib">Colorlib</a>. All rights
                reserved.</span></footer> -->
    </div>
</div>




<ng-template #add_user let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Add a user</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label for="uname">Username</label>
                <p class="text-center" *ngIf="unameError"><i class="fas fa-exclamation-triangle"></i>Username not
                    valid!</p>
                <div class="input-group">
                    <input id="uname" class="form-control" placeholder="Username..." name="uname" [(ngModel)]="uname">
                </div>
                <label for="pass">Password</label>
                <p class="text-center" *ngIf="passError"><i class="fas fa-exclamation-triangle"></i>Password not
                    valid!</p>
                <div class="input-group">
                    <input id="pass" class="form-control" placeholder="Password..." name="pass" [(ngModel)]="pass"
                        type="password">
                </div>
                <label for="des">Name</label>
                <p class="text-center" *ngIf="nameError"><i class="fas fa-exclamation-triangle"></i>Name
                    is not valid!</p>
                <div class="input-group">
                    <input id="des" class="form-control" placeholder="Name..." name="name" [(ngModel)]="name">
                </div>
                <label for="uis">Phone</label>
                <p class="text-center" *ngIf="phoneError"><i class="fas fa-exclamation-triangle"></i>Phone is not
                    valid!</p>
                <div class="input-group">
                    <input id="uis" class="form-control" placeholder="Phone..." name="phone" [(ngModel)]="phone"
                        (keypress)="numberOnly($event)">
                </div>
                <label for="email">Email</label>
                <p class="text-center" *ngIf="emailError"><i class="fas fa-exclamation-triangle"></i>Email
                    is not valid!</p>
                <div class="input-group">
                    <input id="email" class="form-control" placeholder="Email..." name="email" [(ngModel)]="email">
                </div>
                <label for="cate">Role</label>
                <div class="input-group">
                    <select id="cate" class="form-control" placeholder="100" name="cate" [(ngModel)]="urole">
                        <option value="customer" selected>Customer</option>
                        <option value="admin">Admin</option>
                        <option value="employee">Employee</option>
                        <option value="shipper">Shipper</option>
                    </select>
                </div>
                <label for="img">Profile Image</label>
                <div class="input-group">
                    <input type="file" id="img" class="form-control" placeholder="imgUrl" name="dp"
                        (change)="uploadImage($event)">
                </div>
                <img style="width: 100px;height: 100px;margin-top: 10px;" src="{{imgURL}}">
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="saveUser()" *ngIf="!isUpload">Save</button>
    </div>
</ng-template>



<ng-template #edit_user let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Edit a user</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="form-group">

                <label for="des">Name</label>
                <p class="text-center" *ngIf="nameError"><i class="fas fa-exclamation-triangle"></i>Name
                    is not valid!</p>
                <div class="input-group">
                    <input id="des" class="form-control" placeholder="Name..." name="name" [(ngModel)]="name">
                </div>
                <label for="uis">Phone</label>
                <p class="text-center" *ngIf="phoneError"><i class="fas fa-exclamation-triangle"></i>Phone is not
                    valid!</p>
                <div class="input-group">
                    <input id="uis" class="form-control" placeholder="Phone..." name="phone" [(ngModel)]="phone"
                        (keypress)="numberOnly($event)">
                </div>

                <label for="cate">Role</label>
                <div class="input-group">
                    <select id="cate" class="form-control" placeholder="100" name="cate" [(ngModel)]="urole">
                        <option value="customer" selected>Customer</option>
                        <option value="admin">Admin</option>
                        <option value="employee">Employee</option>
                        <option value="shipper">Shipper</option>
                    </select>
                </div>

                <label for="status">Status</label>
                <div class="input-group">
                    <select id="status" class="form-control" placeholder="100" name="status" [(ngModel)]="status">
                        <option value="1" selected>Active</option>
                        <option value="0">Unactive</option>
                    </select>
                </div>
                <label for="img">Profile Image</label>
                <div class="input-group">
                    <input type="file" id="img" class="form-control" placeholder="imgUrl" name="dp"
                        (change)="uploadImage($event)">
                </div>
                <img style="width: 100px;height: 100px;margin-top: 10px;" src="{{imgURL}}">
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="editUser()" *ngIf="!isUpload">Save</button>
    </div>
</ng-template>


<ng-template #user_delete let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Delete this user?</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <p class="text-center"><i class="fas fa-exclamation-triangle"></i>Any order and other infomation associate with this user will also be deleted!</p>
        <p>Name : {{name}}</p>
        <p>Role : {{urole}}</p>
        <p>User Image :</p>
        <img style="width: 100px;height: 100px;margin-top: 10px;" src="{{imgURL}}">
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" style="background-color: red;"
            (click)="deleteUser()">Delete</button>
        <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss('Cross click')">Cancel</button>
    </div>
</ng-template>